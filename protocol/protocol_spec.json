{
  "version": "1.0",
  "description": "Protocol specification for Android to Windows streaming",
  
  "packet_structure": {
    "header": {
      "magic": "0x4157534D",
      "packet_type": "uint8",
      "payload_size": "uint32",
      "timestamp": "uint64",
      "sequence_number": "uint32"
    },
    "payload": "variable_bytes"
  },
  
  "packet_types": {
    "HANDSHAKE_REQUEST": 0x01,
    "HANDSHAKE_RESPONSE": 0x02,
    "VIDEO_CONFIG": 0x03,
    "AUDIO_CONFIG": 0x04,
    "VIDEO_FRAME": 0x10,
    "AUDIO_FRAME": 0x11,
    "CONTROL_COMMAND": 0x20,
    "CONTROL_RESPONSE": 0x21,
    "KEEPALIVE": 0x30,
    "ERROR": 0xFF
  },
  
  "control_commands": {
    "SET_RESOLUTION": {
      "command": "set_resolution",
      "parameters": {
        "width": "int",
        "height": "int"
      }
    },
    "SET_FPS": {
      "command": "set_fps",
      "parameters": {
        "fps": "int"
      }
    },
    "SWITCH_CAMERA": {
      "command": "switch_camera",
      "parameters": {
        "camera": "front|back"
      }
    },
    "SET_FOCUS": {
      "command": "set_focus",
      "parameters": {
        "mode": "auto|manual",
        "distance": "float"
      }
    },
    "SET_FLASH": {
      "command": "set_flash",
      "parameters": {
        "enabled": "boolean"
      }
    },
    "SET_BRIGHTNESS": {
      "command": "set_brightness",
      "parameters": {
        "value": "float"
      }
    },
    "SET_EXPOSURE": {
      "command": "set_exposure",
      "parameters": {
        "value": "float"
      }
    },
    "SET_ZOOM": {
      "command": "set_zoom",
      "parameters": {
        "ratio": "float"
      }
    },
    "SET_MANUAL_MODE": {
      "command": "set_manual_mode",
      "parameters": {
        "enabled": "boolean"
      }
    },
    "SET_MANUAL_ISO": {
      "command": "set_manual_iso",
      "parameters": {
        "iso": "int"
      }
    },
    "SET_MANUAL_SHUTTER": {
      "command": "set_manual_shutter",
      "parameters": {
        "nanos": "long"
      }
    },
    "SET_MANUAL_FOCUS": {
      "command": "set_manual_focus",
      "parameters": {
        "distance": "float"
      }
    },
    "SET_WHITE_BALANCE": {
      "command": "set_white_balance",
      "parameters": {
        "mode": "string",
        "kelvin": "int"
      }
    },
    "SET_TAP_FOCUS": {
      "command": "set_tap_focus",
      "parameters": {
        "x": "float",
        "y": "float",
        "screenWidth": "int",
        "screenHeight": "int"
      }
    },
    "GET_CAMERA_CAPABILITIES": {
      "command": "get_camera_capabilities",
      "parameters": {}
    }
  },
  
  "video_codec": {
    "codec": "H.264",
    "profile": "baseline",
    "level": "3.1",
    "format": "NAL units"
  },
  
  "audio_codec": {
    "codec": "AAC",
    "profile": "LC",
    "sample_rate": 44100,
    "channels": 2,
    "config_data": "AAC Audio Specific Config (CSD-0) sent via AUDIO_CONFIG packet"
  },
  
  "handshake": {
    "pairing_code_length": 6,
    "timeout_ms": 10000
  }
}

